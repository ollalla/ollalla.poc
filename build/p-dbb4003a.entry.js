import{r as t,h as e,H as s,g as r}from"./p-58f23925.js";import{b as o}from"./p-7cb6776a.js";import{f as i}from"./p-c1d22265.js";import"./p-e462b1f2.js";class a{constructor(t,e){this._host=t,this._overlayConfig=e,this._destroyStarted=new o}async getItemElement(){return Array.from(this._host.querySelectorAll("oec-overlay-item")).filter((t=>t.overlayConfig===this._overlayConfig))[0]}getConfig(){return this._overlayConfig}destroyStarted(){return this._destroyStarted}dispose(){this._destroyStarted.next(),this._destroyStarted.complete(),this._host.removeOverlay(this)}}const n=class{constructor(e){t(this,e),this.render$=new o,this.overlayRefs=[],this.hasModifierKey=t=>t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}async addOverlay(t){const e=new a(this.host,t);return await this.waitForNextRenderAfter((()=>{this.overlayRefs=[...this.overlayRefs,e]})),e}async removeOverlay(t){await this.waitForNextRenderAfter((()=>{this.overlayRefs=[...this.overlayRefs.filter((e=>e!==t))]}))}async waitForNextRenderAfter(t){const e=i(this.render$);return t(),e}componentDidRender(){this.render$.next()}async closeWithEscapeKey(t){const e=Array.from(this.host.querySelectorAll("oec-overlay-item")).reverse();for(const s of e)if(await s.isShowing()&&"Escape"===t.key&&!s.overlayConfig.disableClose&&!this.hasModifierKey(t)){t.stopImmediatePropagation(),await s.hide();break}}render(){return e(s,null,this.overlayRefs.map((t=>e("oec-overlay-item",{overlayConfig:t.getConfig()}))))}get host(){return r(this)}};n.style=".sc-oec-overlay-container-h{--oec-overlay-background:#222;--oec-overlay-color:#FFF;position:fixed;z-index:1000;pointer-events:none;top:0;left:0;height:100%;width:100%}.sc-oec-overlay-container-h:empty{display:none}";export{n as oec_overlay_container}